(this.$WP=this.$WP||[]).push(["axg15s",(e,r)=>{var a,t,i,n,d,c,l,s,o,h,m,f,p,_,g,b,v,u,y,P,D,x,T,C,N,k,L,I,S,w,H,M,E,A,R,X,W={hoverStateTrail:"gsZFw Fl",hoverPopoverContainer:"KtuQX _s",hoverThermometer:"jEbkJ",hoverDataContainer:"XITDE e",yAxisLegends:"qDpWU Fl e",yAxisLegendItem:"FCkMo e",yAxisThermometer:"mHjRP Fl Ni NL",topChartContainerPlaceHolder:"IHtcM",chartContainer:"amQUi K",chartContent:"tfDJh",horizontalGrid:"OKRgF e",horizontalLine:"onVNY",dropdownLineWidth:"jaDys",barsContent:"xpPGI",barContainer:"AECrH",monthDivider:"RtLRE",monthBreak:"beMRV q",verticalLine:"bAsAk",hoverLineContainer:"yevnc",hoverLine:"GIJtg",bar:"yprzz",enableCursorHover:"kYkPd",in:"pjUkX",out:"WbHmF",xAxisLegends:"QqDkp",xAxisLegendItem:"NNiDJ c e",xAxisTickMark:"RvtWn",tickMarkMarginRight:"dsjyx",tickMarkMarginLeft:"elGiF",chartFooterLegend:"dZgNm Fl",dropdownFooter:"jSkrQ",disclaimer:"mGNRM",footerLegendContainer:"HfykW",footerLegend:"ZwXlE",legendIcon:"GFWFf",sliderPaginatorContainer:"vLWfx Fl e",sliderPaginatorText:"EOzVn",bgGreen:"IpBgQ",bgYellow:"gfjJy",bgRed:"EwUyc",chartMainContainer:"WRxAq"},z=(e,r,a)=>0===e?0:e===a?98:(e-r)/(a-r)*80+18,F=(e,r,a)=>e<=r?"CHEAP":e>=a?"HIGH":"AVERAGE",O=(e,r,a,t,i,n)=>a<=1?0:a>n-6&&a<=n-1?e-r:t-4*i,B=({data:e,readonly:r,onDatesSelected:l,priceDisclaimerText:o,experiment:h,defaultCheckIn:m})=>{var{localize:_}=f(),b=p(),v=g(),{userAgentCategory:y}=k(),T=u(),{page:C}=P(),{geoId:L,detailId:I}=x(0),S="MOBILE"===v,M="TABLET"===y,[E,A]=n(0),[R,X]=n(e.allPriceDates[0]),[B,j]=n(0),[J,Z]=n("start"),[ee,er]=n(!0),[ea,et]=n(0),[ei,en]=n(!1),[ed,ec]=n(!1),el=d(null),es=d(null),eo=d(null),eh=H({in:ee,timeout:300}),em=D(),ef=em.hotels?.defaultDates===!1,ep=S?e.allPriceDates.slice(0,e.allPriceDates.length/2):e.allPriceDates,[e_,eg]=n(ep);c(()=>{ei||ed||(A(0),X(e_[0]),j(0),Z("start"))},[ei,ed,e_]);var eb=(r,a,t)=>{A(a),X(t),j(O(es.current?.clientWidth||0,eo.current?.scrollWidth||0,a,r.currentTarget.offsetLeft,r.currentTarget.offsetWidth,e.allPriceDates.length)),a>=e_.length-6?Z("end"):a>3&&a<e_.length-6?Z("center"):Z("start")},ev=()=>{if(S||M||r)return null;var e=s.for(R.date),a=e.dayAfter();return l(e,a,R.price)},eu=(r,a)=>{if(A(0),j(0),Z("start"),er(!0),"right"===a){var t=e.allPriceDates.slice(0,e.allPriceDates.length/2);eg(t),X(t[0]);var i=r-1;return i<0?0:i}var n=e.allPriceDates.slice(e.allPriceDates.length/2,e.allPriceDates.length);eg(n),X(n[0]);var d=r+1;return d>1?1:d},ey=()=>et(e=>eu(e,"right")),eP=()=>et(e=>eu(e,"left")),eD=N({onSwipedRight:ey,onSwipedLeft:eP,onSwipeStart:e=>{("Left"===e.dir||"Right"===e.dir)&&er(!1)},onSwiped:e=>{("Left"===e.dir||"Right"===e.dir)&&T({actionType:"scroll",team:"Hotels",actionSubType:"PriceTrendsChart",itemName:`swiped${e.dir}`,page:C,geoId:L,locationId:I})}});return a(t,{children:[i(G,{readonly:r,hoverStateTrailRef:es,hoverPopoverRef:eo,hoverPriceDate:R,leftPosition:S?0:B,mobilePosition:S?J:"start",lowPriceThreshold:e.lowPriceThreshold,highPriceThreshold:e.highPriceThreshold,onDatesSelected:l,setMouseInPopover:en,userEnteredDates:ef,defaultCheckIn:m}),a("div",{onMouseLeave:()=>{ec(!1)},onMouseEnter:()=>{ec(!0)},ref:el,className:W.chartMainContainer,children:[i("div",{className:W.topChartContainerPlaceHolder}),a("div",{className:W.chartContainer,...eD,children:[i(q,{minPrice:e.minPrice,maxPrice:e.maxPrice}),a("div",{className:W.chartContent,children:[i(K,{}),i("div",{className:W.barsContent,children:e_.map((t,n)=>{var d=s.for(R.date),c=d.dayAfter(),l=_.string("Avg. {sPrice} /night, {sDateRange}","HSX_avg_price_on_dateRange",{sPrice:b.formatCurrencyInteger(t.price),sDateRange:`${b.formatDate("date_medium_month",d.date)} - ${b.formatDate("date_medium_month",c.date)}`}),o=`${l} - ${_.string("Select date","HSX_select_date")}`;return a("div",{className:W.barContainer,onMouseEnter:e=>eb(e,n,t),children:[t.hasMonthDivider&&i(V,{priceDate:t}),E===n&&i(Y,{}),i("div",{className:w(W.bar,{[W.in]:"entering"===eh||"entered"===eh,[W.out]:"exit"===eh||"exiting"===eh||"exited"===eh,[W.bgGreen]:"CHEAP"===F(t.price,e.lowPriceThreshold,e.highPriceThreshold)&&n===E,[W.bgYellow]:"AVERAGE"===F(t.price,e.lowPriceThreshold,e.highPriceThreshold)&&n===E,[W.bgRed]:"HIGH"===F(t.price,e.lowPriceThreshold,e.highPriceThreshold)&&n===E,[W.enableCursorHover]:!r}),style:{height:`${z(t.price,e.minPrice,e.maxPrice)}%`},onClick:ev,onKeyUp:e=>{"Enter"===e.code||"Space"===e.code&&t.price>0?ev():"Tab"===e.code&&t.price>0&&eb(e,n,t)},role:"button","aria-label":o,tabIndex:0})]},`PriceTrendsBar-${t.date}`)})}),i($,{allPriceDates:e_})]})]})]}),S&&i(U,{pageRecords:e_.length,selectedIndex:ea,onSwipedLeft:eP,onSwipedRight:ey}),i(Q,{isDesktop:"DESKTOP"===v,priceDisclaimerText:o,experiment:h})]})},G=({readonly:e,hoverStateTrailRef:r,hoverPopoverRef:t,leftPosition:n,mobilePosition:d,hoverPriceDate:c,lowPriceThreshold:l,highPriceThreshold:o,onDatesSelected:_,setMouseInPopover:g,userEnteredDates:b,defaultCheckIn:v})=>{var u=p(),{localize:y}=f(),P=s.for(c.date),D=P.dayAfter(),x=i(m,{variant:"title-05",color:"primaryText",elementType:"span",children:u.formatCurrencyInteger(c.price)}),T=P.month===D.month?D.day:u.formatDate("date_medium_month",D.date);return i("div",{className:W.hoverStateTrail,style:{justifyContent:d},ref:r,children:a("div",{className:W.hoverPopoverContainer,ref:t,style:{left:n},onMouseLeave:()=>{g(!1)},onMouseEnter:()=>{g(!0)},children:[i("div",{className:w(W.hoverThermometer,{[W.bgGreen]:"CHEAP"===F(c.price,l,o),[W.bgYellow]:"AVERAGE"===F(c.price,l,o),[W.bgRed]:"HIGH"===F(c.price,l,o)})}),a("div",{className:W.hoverDataContainer,children:[i(m,{variant:"input-03",color:"primaryText",children:y("Avg. {sPrice} /night, {sDateRange}","HSX_avg_price_on_dateRange",{sPrice:x,sDateRange:y("{ sCheckInDate }-{ sCheckOutDate }","hsx_date_range_medium_no_space",{sCheckInDate:u.formatDate("date_medium_month",P.date),sCheckOutDate:T})})}),!e&&!c.isCheckIn&&!(!b&&P===v)&&i(h,{variant:"primary",onClick:()=>_(P,D,c.price),children:y("Select date","HSX_select_date")})]})]})})},q=({minPrice:e,maxPrice:r})=>a(t,{children:[a("div",{className:W.yAxisLegends,children:[i(j,{price:r}),i(j,{price:e+(r-e)/2}),i(j,{price:e})]}),i("div",{className:W.yAxisThermometer})]}),j=({price:e})=>{var r=p(),{localize:t}=f(),n=g();return a("div",{className:W.yAxisLegendItem,children:[i(m,{variant:"supporting-01",color:"secondaryText",children:r.formatCurrencyInteger(e)}),"MOBILE"!==n&&i(m,{variant:"supporting-02",color:"secondaryText",children:t("per night","base_daily_price_per_night")})]})},K=()=>a("div",{className:W.horizontalGrid,children:[i("div",{className:w(W.horizontalLine,W.dropdownLineWidth)}),i("div",{className:w(W.horizontalLine,W.dropdownLineWidth)}),i("div",{className:w(W.horizontalLine,W.dropdownLineWidth)}),i("div",{className:w(W.horizontalLine,W.dropdownLineWidth)}),i("div",{className:w(W.horizontalLine,W.dropdownLineWidth)}),i("div",{className:w(W.horizontalLine,W.dropdownLineWidth)})]}),V=({priceDate:e})=>{var r=p();return a("div",{className:W.monthDivider,children:[i("div",{className:W.monthBreak,children:i(m,{variant:"supporting-04",color:"placeholderText",children:r.formatDate("month_short",s.for(e.date).addMonths(-1).date)})}),i("hr",{className:W.verticalLine}),i("div",{className:W.monthBreak,children:i(m,{variant:"supporting-04",color:"placeholderText",children:r.formatDate("month_short",s.for(e.date).date)})})]})},Y=()=>i("div",{className:W.hoverLineContainer,children:i("hr",{className:W.hoverLine})}),$=({allPriceDates:e})=>{var r=p(),{localize:t}=f(),n="MOBILE"===g(),d=parseInt(String(e.length/2),10),c=e.length-1,l=(e,r)=>e?0===r||r===d||r===c:r%2==0;return i("div",{className:W.xAxisLegends,children:e.map((e,d)=>{var o=r.formatDate("date_medium_month",s.for(e.date).date);return l(n,d)&&a("div",{className:W.xAxisLegendItem,children:[i("hr",{className:w(W.xAxisTickMark,{[W.tickMarkMarginRight]:n&&0===d,[W.tickMarkMarginLeft]:n&&d===c})}),i(m,{variant:"supporting-02",children:e.isCheckIn||e.isToday?i("b",{children:o}):o}),(e.isToday||e.isCheckIn)&&i(m,{variant:"supporting-02",children:i("b",{children:e.isCheckIn?t("Check In","meta_check_in_c2b"):t("Today","HSX_today")})})]},`PriceTrendsXAxis-${e.date}`)})})},Q=({isDesktop:e,priceDisclaimerText:r,experiment:t})=>{var{localize:n}=f();return a("div",{className:w(W.chartFooterLegend,W.dropdownFooter),children:[e&&"control"!==t&&i("div",{className:W.disclaimer,children:i(C,{priceDisclaimer:r,variant:"supporting-01"})}),a("div",{className:W.footerLegendContainer,children:[a("div",{className:W.footerLegend,children:[i("div",{className:w(W.legendIcon,W.bgGreen)}),i(m,{variant:"supporting-02",children:n("Cheaper","hotels_price_heatmap_cheaper")})]}),a("div",{className:W.footerLegend,children:[i("div",{className:w(W.legendIcon,W.bgYellow)}),i(m,{variant:"supporting-02",children:n("Average","hotels_price_heatmap_average")})]}),a("div",{className:W.footerLegend,children:[i("div",{className:w(W.legendIcon,W.bgRed)}),i(m,{variant:"supporting-02",children:n("Higher","hotels_price_heatmap_higher")})]})]})]})},U=({selectedIndex:e,pageRecords:r,onSwipedRight:t,onSwipedLeft:n})=>{var{localize:d}=f();return a("div",{className:W.sliderPaginatorContainer,children:[i(L,{numberOfItems:2,selectedIndex:e}),a("button",{type:"button",className:W.sliderPaginatorText,onClick:0===e?n:t,children:[1===e&&i(I,{}),a(m,{variant:"supporting-02",children:[0===e&&d("Next {numDays} days","HSX_next_x_days",{numDays:r}),1===e&&d("Last {numDays} days","HSX_last_x_days",{numDays:r})]}),0===e&&i(S,{})]})]})},J=(e,r)=>a=>{var{keyCode:t}=a;switch(t){case R:r(!1);break;case A:r(!0);break;case E:case M:r(!e)}},Z=({title:e,open:r=!1,onClick:t})=>a("button",{type:"button",className:w("zMbwy Q2 Fh u",{nWtDa:r}),onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},onKeyDown:J(r,t),children:[e,i("div",{className:w({"SfkuT _S Cl":!0,IbQZD:r}),children:i(X,{size:20})})]}),ee=({title:e,children:r,open:t=!1,onChange:n})=>a("div",{role:"group",className:"woOHq Q2 _c",children:[i(Z,{title:e,open:t,onClick:()=>n&&n(!t)}),i("div",{className:w({VqALy:!t}),children:r})]}),er={title:"RsWTk Fl f",textContainer:"ZxkII f e",enterDates:"yTFsy f",disclaimer:"dguIv e f",footer:"IQIVm e f",modalBody:"xmwfd"},ea=({dataSize:e,priceDisclaimerText:r,onClickCTAEnterDates:n})=>{var d="MOBILE"===g(),{localize:c}=f();return a(t,{children:[a("div",{className:er.title,children:[a("div",{className:er.textContainer,children:[i(m,{variant:"title-02",children:c("Price trends in the next {numDays} days","HSX_price_trends_in_the_next_x_days",{numDays:e})}),!d&&i(C,{priceDisclaimer:r,variant:"supporting-02",color:"secondaryText"})]}),!d&&i(o,{variant:"secondary",size:"small",onClick:n,children:a("div",{className:er.enterDates,children:[i(_,{}),c("Enter dates","fusion_date_picker_enter_dates")]})})]}),i(b,{})]})},et=({dataSize:e,price:r,lowPriceThreshold:n,highPriceThreshold:d,isMobile:c})=>{var{localize:l}=f(),s=F(r,n,d);return a(t,{children:[i("div",{className:er.title,children:a("div",{className:er.textContainer,children:[i(m,{variant:c?"title-04":"title-03",children:l("Price trends in the next {numDays} days","HSX_price_trends_in_the_next_x_days",{numDays:e})}),i(m,{variant:c?"supporting-01":"body-01",children:l("Prices are currently {sType, select, LOW {low} HIGH {high} other {average}} for your trip","hsx_price_trend_current",{sType:"CHEAP"===s?"LOW":s})})]})}),i(b,{})]})},ei=({onClickCTAEnterDates:e})=>{var{localize:r}=f();return i("div",{className:er.footer,children:i(o,{variant:"secondary",size:"small",onClick:e,fullWidth:!0,children:a("div",{className:er.enterDates,children:[i(_,{}),r("Enter dates to view deals","hsx_enter_dates_view_deals")]})})})},en=({data:e,avgPrice:r,onClose:t,readonly:d=!1,onDatesSelected:c,priceDisclaimerText:o,onClickCTAEnterDates:h,checkInDate:m,experiment:p="control"})=>{var _="MOBILE"===g(),b=y(),N=u(),{page:k}=P(),{geoId:L,detailId:I}=x(0),{localize:S}=f(),w=S.string("Reflects recent average nightly prices reported by our partners, and may not include estimated taxes or fees. Price at checkout may differ.","HSX_price_trends_default_disclaimer"),[H,M]=n("variant a"===p),E=D(),A=E.hotels?.defaultDates===!1,R=s.today().date;R.setDate(R.getDate()-R.getDay()+7),R.setDate(R.getDate()-R.getDay()+7);var X=s.for(R),W=()=>{h&&(N({actionType:"click",team:"Hotels",actionSubType:"PriceTrendsModal",itemName:"enterDatesCTA",page:k,geoId:L,locationId:I}),h()),t&&t()},z=()=>{N({actionType:"click",team:"Hotels",actionSubType:"PriceTrendsModal",itemName:"dismissModal",page:k,geoId:L,locationId:I}),t&&t()},F=ed(e,r,m),O=F?.allPriceDates.find(e=>e.date===X.ymd),G=A?F?.allPriceDates[0].price:O?.price,q=T(()=>{b({itemType:"page",itemName:"PriceTrendsModal",team:"Hotels",page:k,geoId:L,locationId:I,customData:{minPrice:F?.minPrice,maxPrice:F?.maxPrice}})}),j=F?.allPriceDates?F.allPriceDates.length-1:0,K=F&&a("div",{ref:q,className:er.modalBody,children:[i(B,{data:F,readonly:d,onDatesSelected:(e,r,a)=>{var i=(t,i)=>{N({actionType:"click",team:"Hotels",actionSubType:t,itemName:i,page:k,geoId:L,locationId:I,customData:{checkIn:e.toISOString(),checkOut:r.toISOString(),priceSelected:a,origin:"PriceTrendsModal"}})};c&&(i(v.setDateRange,"dateRange"),i(v.setDates,"checkIn"),c(e,r)),t&&t()},priceDisclaimerText:o||w,experiment:p,defaultCheckIn:X}),_&&i("div",{className:er.disclaimer,children:i(C,{priceDisclaimer:o||w,variant:"supporting-02",color:"secondaryText"})})]}),V=_?i(l,{closeButtonPosition:"right",onClose:z,title:i(ea,{dataSize:j,priceDisclaimerText:o||w,onClickCTAEnterDates:W}),footer:i(ei,{onClickCTAEnterDates:W}),variant:"fixed-height-sticky-footer",heightOption:"restricted-full",bodyContainerStyle:"flex-grow",children:K}):i(l,{closeButtonPosition:"right",onClose:z,title:i(ea,{dataSize:j,priceDisclaimerText:o||w,onClickCTAEnterDates:W}),variant:"variable-height",children:K}),Y=j>0&&i(ee,{title:i(et,{dataSize:j,price:G??r,lowPriceThreshold:F?.lowPriceThreshold||0,highPriceThreshold:F?.highPriceThreshold||0,isMobile:_}),open:H,onChange:M,children:K});return"control"===p?V:Y},ed=(e,r,a)=>{if(!e||0===e.length||!e[0]?.allPriceDates||e[0]?.allPriceDates?.length===0)return null;for(var t=e.flatMap(e=>e?e.allPriceDates:[]),i=s.for(t[0]?.date||s.today()),n=[],d=0;d<=30;)!function(){var e=i.addDays(d),c=t.find(r=>!!r?.date&&s.for(r.date).sameDay(e));n.push({date:c?.date||e.ymd,price:c?.price||r,isToday:e.sameDay(s.today()),isCheckIn:!!a&&e.sameDay(s.for(a)),hasMonthDivider:1===e.date.getDate()}),d++}();var c=Math.max(...e.map(e=>e&&e.highPriceThreshold?e.highPriceThreshold:0)),l=Math.max(...e.map(e=>e&&e.maxPrice?e.maxPrice:0));return{allPriceDates:n,highPriceThreshold:c,lowPriceThreshold:Math.min(...e.map(e=>e&&e.lowPriceThreshold?e.lowPriceThreshold:0)),maxPrice:l,minPrice:Math.min(...e.map(e=>e&&e.minPrice?e.minPrice:0))}};return[()=>{e("default",en)},[e=>(a=e.jsxs,t=e.Fragment,i=e.jsx),e=>(n=e.useState,d=e.useRef,c=e.useEffect),e=>l=e.Modal,e=>s=e.default,e=>(o=e.default,h=e.BorderlessButton),e=>m=e.default,e=>(f=e.useLocalize,p=e.useIntlFormatter),e=>_=e.default,e=>g=e.useViewportCategory,e=>b=e.default,e=>v=e.TrackingSubType,e=>(u=e.useHotelInteractionLogger,y=e.useHotelImpressionLogger),e=>P=e.useRoute,e=>D=e.useTravelInfo,e=>x=e.useLocationId,e=>T=e.useOnVisible,e=>C=e.e,e=>N=e.useSwipeable,e=>k=e.useUserAgent,e=>L=e.default,e=>I=e.default,e=>S=e.default,e=>w=e.default,e=>H=e.default,e=>(M=e.KEY_ENTER,E=e.KEY_SPACE,A=e.KEY_DOWN,R=e.KEY_UP),e=>X=e.default]]},["21h32l","o4yt4q","i3sz5h","fgi73t","jppfwt","essqvy","7thqz4","00mpxl","ys6v1o","covaqn","h1hqsi","ctn2v9","fgwvq1","etaac9","2tnrli","3btuy0","a7eg9n","9w33la","nnprhg","d0lmv3","a6i9w3","6qmqhw","fkji80","sdpjgr","conwso","i0z8n1"]]);
